<!--
    Copyright © 2025 Christian Palm (christian@palm-family.de)
    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ResourceDictionary
    x:Class="ninaAPI.Options"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <DataTemplate x:Key="Advanced API_Options">
        <StackPanel Orientation="Vertical">
            <!-- Warning Text -->
            <TextBlock
                Margin="0,5,0,15"
                TextWrapping="Wrap"
                Text="Be careful when changing any of the below options! These alter the functionality of the API and can cause apps like Touch 'N' Stars to not work properly." />

            <!-- Create Thumbnails -->
            <StackPanel Orientation="Horizontal" Margin="0,5">
                <TextBlock
                    Width="350"
                    VerticalAlignment="Center"
                    Text="Create Thumbnails:" />
                <CheckBox
                    VerticalAlignment="Center"
                    IsChecked="{Binding CreateThumbnails}" />
            </StackPanel>

            <!-- Enable ComboBox -->
            <StackPanel Orientation="Horizontal" Margin="0,5">
                <TextBlock
                    Width="350"
                    VerticalAlignment="Center"
                    Text="Enable:" />
                <ComboBox
                    Width="200"
                    ItemsSource="{Binding ApiOptions}"
                    SelectedValue="{Binding SelectedApiOption}" />
            </StackPanel>

            <!-- API Port Section -->
            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                <TextBlock
                    Width="350"
                    VerticalAlignment="Center"
                    Text="API Port:" />
                <TextBox
                    Width="80"
                    VerticalAlignment="Center"
                    Text="{Binding PreferredPort}" />

                <TextBlock
                    Margin="10,0,0,0"
                    VerticalAlignment="Center"
                    Text="Profile Dependent Port?" />
                <CheckBox
                    Margin="5,0,0,0"
                    VerticalAlignment="Center"
                    IsChecked="{Binding ProfileDependentPort}"
                    ToolTip="Make the port profile dependent" />

                <TextBlock
                    Margin="20,0,0,0"
                    VerticalAlignment="Center"
                    Text="API running on port:"
                    Visibility="{Binding PortVisibility}" />
                <TextBlock
                    Margin="5,0,0,0"
                    VerticalAlignment="Center"
                    Text="{Binding ActualPort}"
                    Visibility="{Binding PortVisibility}" />

                <Button
                    Width="180"
                    Margin="15,0,0,0"
                    VerticalAlignment="Center"
                    Command="{Binding UpdateDefaultPortCommand}"
                    Content="Update Default Port"
                    ToolTip="Updates the default launch port for the API"
                    Visibility="{Binding PortVisibility}" />
            </StackPanel>

            <!-- Access-Control-Allow-Origin -->
            <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                <TextBlock
                    Width="350"
                    VerticalAlignment="Center"
                    Text="⚠️ Use Access-Control-Allow-Origin Header ⚠️"
                    ToolTip="Allows JavaScript to access the API directly without a proxy. Required for some applications like Touch 'N' Stars." />
                <CheckBox
                    VerticalAlignment="Center"
                    IsChecked="{Binding UseAccessHeader}" />
            </StackPanel>

            <TextBlock
                Margin="0,5,0,0"
                TextWrapping="Wrap"
                Text="Access-Control-Allow-Origin is part of the CORS rules and determines which websites are allowed to access a server's data. Without this header, browsers block requests from other domains for security reasons. This is only relevant if the software is accessible via the Internet; in closed networks, such attacks are not possible." />

            <Separator Margin="0,15" />

            <StackPanel Orientation="Vertical">
                <TextBlock Margin="0,5,0,5" Text="Network adresses: " />
                <StackPanel Orientation="Horizontal">
                    <TextBlock
                        Width="100"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Text="Localhost" />
                    <TextBlock Margin="0,5,0,5" VerticalAlignment="Center">
                        <Hyperlink NavigateUri="{Binding LocalAddress}" RequestNavigate="Hyperlink_RequestNavigate">
                            <TextBlock VerticalAlignment="Center" Text="{Binding LocalAddress}" />
                        </Hyperlink>
                    </TextBlock>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock
                        Width="100"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Text="IP Address" />
                    <TextBlock Margin="0,5,0,5" VerticalAlignment="Center">
                        <Hyperlink NavigateUri="{Binding LocalNetworkAddress}" RequestNavigate="Hyperlink_RequestNavigate">
                            <TextBlock VerticalAlignment="Center" Text="{Binding LocalNetworkAddress}" />
                        </Hyperlink>
                    </TextBlock>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock
                        Width="100"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Text="This Host" />
                    <TextBlock Margin="0,5,0,5" VerticalAlignment="Center">
                        <Hyperlink NavigateUri="{Binding HostAddress}" RequestNavigate="Hyperlink_RequestNavigate">
                            <TextBlock VerticalAlignment="Center" Text="{Binding HostAddress}" />
                        </Hyperlink>
                    </TextBlock>
                </StackPanel>
            </StackPanel>

        </StackPanel>
    </DataTemplate>
</ResourceDictionary>